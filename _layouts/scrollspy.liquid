---
layout: default
---

<style>
/* Use border-box everywhere to avoid width surprises */
*, *::before, *::after { box-sizing: border-box; }

/* Hide navbar immediately on pages using this layout to avoid FOUC */
.navbar { display: none !important; }

/* Hide the default navbar */
body.scrollspy-active .navbar {
  display: none;
}

/* Top navigation for sections */
.section-nav {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  background: var(--global-bg-color);
  border-bottom: 1px solid var(--global-divider-color);
  z-index: 1000;
  padding: 0.75rem 2rem;
  display: flex;
  justify-content: center;
  gap: 0.5rem;
  height: 56px; /* fallback; JS recalcs actual height */
  align-items: center;
  box-sizing: border-box;
}

.section-nav a {
  padding: 0.5rem 1rem;
  text-transform: uppercase;
  font-size: 0.85rem;
  letter-spacing: 0.05em;
  text-decoration: none;
  color: var(--global-text-color);
  border-bottom: 2px solid transparent;
  transition: all 0.2s;
}

.section-nav a:hover,
.section-nav a.active {
  color: var(--global-theme-color);
  border-bottom-color: var(--global-theme-color);
}

/* Keep horizontal snapping, stop stretching, allow fixed-wrapper approach */
/* fixed, centered horizontal wrapper respecting site's max width */
.sections-wrapper {
  position: fixed;
  left: 50%;
  transform: translateX(-50%);    /* center wrapper so site respects max width */
  max-width: var(--global-max-width, 930px); /* uses theme variable; fallback to 930px */
  width: 100%;
  top: 56px; /* JS will update exact top based on nav height */
  height: calc(100vh - 56px); /* JS will update exact height on load/resize */
  display: flex;
  overflow-x: auto;
  overflow-y: hidden;
  scroll-behavior: smooth;
  scroll-snap-type: x mandatory;
  -webkit-overflow-scrolling: touch;
  gap: 0;
  align-items: flex-start;
  z-index: 1;
}

/* lane for each section; real content inside .section-inner */
.page-section {
  flex: 0 0 100%;
  min-width: 100%;
  width: 100%;
  box-sizing: border-box;
  height: auto !important;
  min-height: 0 !important;
  max-height: none !important;
  overflow: visible;
  scroll-snap-align: start;
  padding: 0;
  align-self: flex-start;
  position: relative;
}

/* inner wrapper for each section's real scrollable content */
.section-inner {
  position: relative;             /* will be translated vertically to reflect page scroll */
  will-change: transform;
  transform: translateY(0);
}

/* proxy that creates the page's vertical height (inserted by JS) */
#scroll-proxy {
  width: 100%;
  height: 1px; /* updated by JS */
}

/* content container keeps site's existing layout */
.page-section .container {
  max-width: var(--global-max-width);
  margin: 0 auto;
  padding: 2rem 1rem;
  box-sizing: border-box;
  width: 100%;
}

/* Ensure images and floated elements don't overflow */
.page-section img,
.page-section .profile img {
  max-width: 100%;
  height: auto;
  display: block;
}

/* Ensure posts don't exceed the container */
.post {
  width: 100%;
  box-sizing: border-box;
}

/* Clear floats where used */
.clearfix::after {
  content: "";
  display: table;
  clear: both;
}

@media (max-width: 768px) {
  .section-nav {
    padding: 0.5rem 1rem;
    overflow-x: auto;
    justify-content: flex-start;
  }

  .section-nav a {
    font-size: 0.75rem;
    padding: 0.4rem 0.8rem;
    white-space: nowrap;
  }
}
</style>

<nav class="section-nav">
  <a href="#about" class="nav-link active">About</a>
  <a href="#blog" class="nav-link">Blog</a>
  {% if page.show_publications %}<a href="#publications" class="nav-link">Publications</a>{% endif %}
  <a href="#code" class="nav-link">Code</a>
  {% if page.show_cv %}<a href="#cv" class="nav-link">CV</a>{% endif %}

</nav>

<div class="sections-wrapper">
  <!-- About Section -->
  <section id="about" class="page-section">
    <div class="container">
      <div class="post">
        <header class="post-header">
          <h1 class="post-title">
            {% if site.title == 'blank' %}
              <span class="font-weight-bold">{{ site.first_name }}</span> {{ site.middle_name }} {{ site.last_name }}
            {% else %}
              {{ site.title }}
            {% endif %}
          </h1>
          <p class="desc">{{ page.subtitle }}</p>
        </header>

        <article>
          {% if page.profile %}
            <div class="profile float-{% if page.profile.align == 'left' %}left{% else %}right{% endif %}">
              {% if page.profile.image %}
                {% assign profile_image_path = page.profile.image | prepend: 'assets/img/' %}
                {% if page.profile.image_circular %}
                  {% assign profile_image_class = 'img-fluid z-depth-1 rounded-circle' %}
                {% else %}
                  {% assign profile_image_class = 'img-fluid z-depth-1 rounded' %}
                {% endif %}
                {% capture sizes %}(min-width: {{ site.max_width }}) {{ site.max_width | minus: 30 | times: 0.3}}px, (min-width: 576px) 30vw, 95vw"{% endcapture %}
                {% include figure.liquid loading="eager" path=profile_image_path class=profile_image_class sizes=sizes alt=page.profile.image cache_bust=true %}
              {% endif %}
              {% if page.profile.more_info %}
                <div class="more-info">{{ page.profile.more_info }}</div>
              {% endif %}
            </div>
          {% endif %}

          <div class="clearfix">{{ content }}</div>

          {% if page.social %}
            <div class="social">
              <div class="contact-icons">{% include social.liquid %}</div>
              <div class="contact-note">{{ site.contact_note }}</div>
            </div>
          {% endif %}
        </article>
      </div>
    </div>
  </section>

  <!-- Blog Section -->
  <section id="blog" class="page-section">
    <div class="post">

    {% assign blog_name_size = site.blog_name | size %}
    {% assign blog_description_size = site.blog_description | size %}

    {% if blog_name_size > 0 or blog_description_size > 0 %}

      <div class="header-bar">
        <h1>{{ site.blog_name }}</h1>
        <h2>{{ site.blog_description }}</h2>
      </div>
      {% endif %}

    {% if site.display_tags and site.display_tags.size > 0 or site.display_categories and site.display_categories.size > 0 %}

      <div class="tag-category-list">
        <ul class="p-0 m-0">
          {% for tag in site.display_tags %}
            <li>
              <i class="fa-solid fa-hashtag fa-sm"></i> <a href="{{ tag | slugify | prepend: '/blog/tag/' | relative_url }}">{{ tag }}</a>
            </li>
            {% unless forloop.last %}
              <p>&bull;</p>
            {% endunless %}
          {% endfor %}
          {% if site.display_categories.size > 0 and site.display_tags.size > 0 %}
            <p>&bull;</p>
          {% endif %}
          {% for category in site.display_categories %}
            <li>
              <i class="fa-solid fa-tag fa-sm"></i> <a href="{{ category | slugify | prepend: '/blog/category/' | relative_url }}">{{ category }}</a>
            </li>
            {% unless forloop.last %}
              <p>&bull;</p>
            {% endunless %}
          {% endfor %}
        </ul>
      </div>
      {% endif %}

    {% assign featured_posts = site.posts | where: "featured", "true" %}
    {% if featured_posts.size > 0 %}
    <br>

    <div class="container featured-posts">
    {% assign is_even = featured_posts.size | modulo: 2 %}
    <div class="row row-cols-{% if featured_posts.size <= 2 or is_even == 0 %}2{% else %}3{% endif %}">
    {% for post in featured_posts %}
    <div class="col mb-4">
    <a href="{{ post.url | relative_url }}">
    <div class="card hoverable">
    <div class="row g-0">
    <div class="col-md-12">
    <div class="card-body">
    <div class="float-right">
    <i class="fa-solid fa-thumbtack fa-xs"></i>
    </div>
    <h3 class="card-title text-lowercase">{{ post.title }}</h3>
    <p class="card-text">{{ post.description }}</p>

                        {% if post.external_source == blank %}
                          {% assign read_time = post.content | number_of_words | divided_by: 180 | plus: 1 %}
                        {% else %}
                          {% assign read_time = post.feed_content | strip_html | number_of_words | divided_by: 180 | plus: 1 %}
                        {% endif %}
                        {% assign year = post.date | date: "%Y" %}

                        <p class="post-meta">
                          {{ read_time }} min read &nbsp; &middot; &nbsp;
                          <a href="{{ year | prepend: '/blog/' | relative_url }}">
                            <i class="fa-solid fa-calendar fa-sm"></i> {{ year }} </a>
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </a>
            </div>
          {% endfor %}
          </div>
        </div>
        <hr>

    {% endif %}

      <ul class="post-list">

        {% if page.pagination.enabled %}
          {% assign postlist = paginator.posts %}
        {% else %}
          {% assign postlist = site.posts %}
        {% endif %}

        {% for post in postlist %}

        {% if post.external_source == blank %}
          {% assign read_time = post.content | number_of_words | divided_by: 180 | plus: 1 %}
        {% else %}
          {% assign read_time = post.feed_content | strip_html | number_of_words | divided_by: 180 | plus: 1 %}
        {% endif %}
        {% assign year = post.date | date: "%Y" %}
        {% assign tags = post.tags | join: "" %}
        {% assign categories = post.categories | join: "" %}

        <li>

    {% if post.thumbnail %}

    <div class="row">
              <div class="col-sm-9">
    {% endif %}
            <h3>
            {% if post.redirect == blank %}
              <a class="post-title" href="{{ post.url | relative_url }}">{{ post.title }}</a>
            {% elsif post.redirect contains '://' %}
              <a class="post-title" href="{{ post.redirect }}" target="_blank">{{ post.title }}</a>
              <svg width="2rem" height="2rem" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
                <path d="M17 13.5v6H5v-12h6m3-3h6v6m0-6-9 9" class="icon_svg-stroke" stroke="#999" stroke-width="1.5" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path>
              </svg>
            {% else %}
              <a class="post-title" href="{{ post.redirect | relative_url }}">{{ post.title }}</a>
            {% endif %}
          </h3>
          <p>{{ post.description }}</p>
          <p class="post-meta">
            {{ read_time }} min read &nbsp; &middot; &nbsp;
            {{ post.date | date: '%B %d, %Y' }}
            {% if post.external_source %}
            &nbsp; &middot; &nbsp; {{ post.external_source }}
            {% endif %}
          </p>
          <p class="post-tags">
            <a href="{{ year | prepend: '/blog/' | relative_url }}">
              <i class="fa-solid fa-calendar fa-sm"></i> {{ year }} </a>

              {% if tags != "" %}
              &nbsp; &middot; &nbsp;
                {% for tag in post.tags %}
                <a href="{{ tag | slugify | prepend: '/blog/tag/' | relative_url }}">
                  <i class="fa-solid fa-hashtag fa-sm"></i> {{ tag }}</a>
                  {% unless forloop.last %}
                    &nbsp;
                  {% endunless %}
                  {% endfor %}
              {% endif %}

              {% if categories != "" %}
              &nbsp; &middot; &nbsp;
                {% for category in post.categories %}
                <a href="{{ category | slugify | prepend: '/blog/category/' | relative_url }}">
                  <i class="fa-solid fa-tag fa-sm"></i> {{ category }}</a>
                  {% unless forloop.last %}
                    &nbsp;
                  {% endunless %}
                  {% endfor %}
              {% endif %}
        </p>

    {% if post.thumbnail %}

    </div>

      <div class="col-sm-3">
        <img class="card-img" src="{{ post.thumbnail | relative_url }}" style="object-fit: cover; height: 90%" alt="image">
      </div>
    </div>
    {% endif %}
        </li>

        {% endfor %}

      </ul>

    {% if page.pagination.enabled %}
    {% include pagination.liquid %}
    {% endif %}

    </div>
  </section>


  <!-- Publications Section - Full page content -->
  {% if page.show_publications %}
  <section id="publications" class="page-section">
    <div class="container">
      <div class="post">
        {% if site.data.socials and site.data.socials.scholar_userid %}
          {% assign scholar_url = "https://scholar.google.com/citations?user=" | append: site.data.socials.scholar_userid %}
        {% elsif site.google_scholar %}
          {% assign scholar_url = site.google_scholar %}
        {% else %}
          {% assign scholar_url = "https://scholar.google.com/citations?user=YOUR_ID" %}
        {% endif %}
        <p class="publications-link">
          For the full list of my papers see
          <a href="{{ scholar_url }}" target="_blank" rel="noopener noreferrer">Google Scholar</a>.
        </p>
        <article>
          <div class="publications">
            {% if page.years %}
              {% for y in page.years %}
                <h2 class="year">{{ y }}</h2>
                {% bibliography --query @*[year={{ y }}] %}
              {% endfor %}
            {% else %}
              {% bibliography %}
            {% endif %}
          </div>
        </article>
      </div>
    </div>
  </section>
  {% endif %}

  <!-- Code Section -->
  <section id="code" class="page-section">
    <div class="container">
      <h2>Code</h2>
      <div class="repositories d-flex flex-wrap flex-md-row flex-column justify-content-between align-items-center">
        {% for user in site.data.repositories.github_users %}
          {% include repository/repo_user.liquid username=user %}
        {% endfor %}
      </div>

      {% if site.data.repositories.github_repos %}
      <h2>GitHub Repositories</h2>
      <div class="repositories d-flex flex-wrap flex-md-row flex-column justify-content-between align-items-center">
        {% for repo in site.data.repositories.github_repos %}
          {% include repository/repo.liquid repository=repo %}
        {% endfor %}
      {% endif %}
      </div>
    </div>
  </section>

  <!-- CV Section -->
  {% if page.show_cv %}
  <section id="cv" class="page-section">
    <div class="container">
      <div class="post">
        <header class="post-header">
          <h1 class="post-title">Curriculum Vitae</h1>
        </header>
        <article>
          <p>Download my complete curriculum vitae for more details about my academic background, research experience, and publications.</p>
          <a href="{{ page.cv_pdf | prepend: 'assets/pdf/' | relative_url }}" class="btn btn-sm z-depth-0" role="button" target="_blank">
            <i class="fas fa-file-pdf"></i> Download PDF
          </a>
        </article>
      </div>
    </div>
  </section>
  {% endif %}

</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const nav = document.querySelector('.section-nav');
  const wrapper = document.querySelector('.sections-wrapper');
  const rawSections = Array.from(document.querySelectorAll('.page-section'));
  const navLinks = document.querySelectorAll('.section-nav .nav-link');

  if (!wrapper || rawSections.length === 0) return;

  const UP_TOLERANCE = 1024; // reasonable upward tolerance in px
  let sections = [];            // { el, inner, height }
  let cumHeights = [];
  let totalHeight = 0;
  let sectionWidth = 0;
  let rafPending = false;
  let lastIndex = 0;

  // Wrap each section's children in .section-inner
  rawSections.forEach(s => {
    const inner = document.createElement('div');
    inner.className = 'section-inner';
    while (s.firstChild) inner.appendChild(s.firstChild);
    s.appendChild(inner);
    sections.push({ el: s, inner: inner, height: 0 });
  });

  // Insert proxy before the wrapper to provide page vertical height
  const proxy = document.createElement('div');
  proxy.id = 'scroll-proxy';
  wrapper.parentNode.insertBefore(proxy, wrapper);

  function recalcLayout() {
    const navHeight = nav ? nav.offsetHeight : 0;
    wrapper.style.top = navHeight + 'px';
    wrapper.style.height = (window.innerHeight - navHeight) + 'px';

    sectionWidth = wrapper.clientWidth || window.innerWidth;
    totalHeight = 0;

    sections.forEach(s => {
      s.el.style.width = sectionWidth + 'px';
      s.el.style.flex = '0 0 ' + sectionWidth + 'px';
      s.inner.style.transform = 'translateY(0)';
      s.height = s.inner.scrollHeight;
      totalHeight += s.height;
    });

    cumHeights = [];
    let acc = 0;
    for (let i = 0; i < sections.length; ++i) {
      cumHeights.push(acc);
      acc += sections[i].height;
    }

    const navH = nav ? nav.offsetHeight : 0;
    const extra = Math.max(0, window.innerHeight - navH);
    proxy.style.height = Math.max(1, totalHeight + extra) + 'px';

    const currentIndex = Math.round((wrapper.scrollLeft || 0) / (sectionWidth || 1));
    lastIndex = Math.min(Math.max(0, currentIndex), sections.length - 1);
    wrapper.scrollLeft = lastIndex * sectionWidth;

    syncFromWindowScroll();
  }

  function syncFromWindowScroll() {
    const navHeight = nav ? nav.offsetHeight : 0;
    const proxyTop = proxy.getBoundingClientRect().top + window.scrollY;
    let scrollY = window.scrollY - proxyTop;
    if (scrollY < 0) scrollY = 0;
    if (scrollY > totalHeight) scrollY = totalHeight;

    // raw index: last section whose start <= scrollY
    let rawIndex = 0;
    for (let i = 0; i < sections.length; ++i) {
      if (scrollY >= cumHeights[i]) rawIndex = i;
      else break;
    }

    // Hysteresis with limited upward jump (only one section at a time)
    let index = lastIndex;
    if (rawIndex > lastIndex) {
      // scrolling down/forward — accept immediately (can jump forward multiple)
      index = rawIndex;
    } else if (rawIndex < lastIndex) {
      // scrolling up — require threshold and only move up one step at most
      const currentStart = cumHeights[lastIndex] || 0;
      // compute dynamic tolerance: don't exceed a fraction of current section height
      const dynTol = Math.min(UP_TOLERANCE, Math.max(40, sections[lastIndex].height / 4));
      const upThreshold = Math.max(0, currentStart - dynTol);
      if (scrollY <= upThreshold) {
        // move up only one step to avoid skipping sections
        index = Math.max(0, lastIndex - 1);
      } else {
        index = lastIndex;
      }
    } else {
      index = rawIndex;
    }

    const offsetWithin = Math.max(0, scrollY - cumHeights[index]);
    const availableHeight = window.innerHeight - navHeight;
    const maxOffset = Math.max(0, sections[index].height - availableHeight);
    const clampedOffset = Math.min(offsetWithin, maxOffset);

    window.requestAnimationFrame(() => {
      wrapper.scrollLeft = index * sectionWidth;
      sections.forEach((s, i) => {
        s.inner.style.transform = (i === index) ? ('translateY(' + (-clampedOffset) + 'px)') : 'translateY(0)';
      });
      navLinks.forEach((link, i) => link.classList.toggle('active', i === index));
      lastIndex = index;
    });
  }

  // click nav -> scroll page to virtual top of that section
  navLinks.forEach((link, i) => {
    link.addEventListener('click', function(e) {
      e.preventDefault();
      const proxyTop = proxy.getBoundingClientRect().top + window.scrollY;
      const rawTarget = proxyTop + cumHeights[i];

      const navH = nav ? nav.offsetHeight : 0;
      const extra = Math.max(0, window.innerHeight - navH);
      const proxyH = parseFloat(proxy.style.height) || (totalHeight + extra);
      const maxTarget = proxyTop + proxyH - window.innerHeight;

      const target = Math.min(rawTarget, Math.max(proxyTop, maxTarget));
      // scroll and immediately reflect the clicked tab as active
      lastIndex = i;
      window.scrollTo({ top: target, behavior: 'smooth' });

      requestAnimationFrame(syncFromWindowScroll);
      setTimeout(syncFromWindowScroll, 150);
      setTimeout(syncFromWindowScroll, 600);
    });
  });

  // on native scroll, always map to horizontal + transform
  function onScroll() {
    if (rafPending) return;
    rafPending = true;
    requestAnimationFrame(() => {
      syncFromWindowScroll();
      rafPending = false;
    });
  }
  window.addEventListener('scroll', onScroll, { passive: true });

  // keyboard navigation
  document.addEventListener('keydown', function(e) {
    if (['ArrowRight','PageDown','ArrowLeft','PageUp'].includes(e.key)) {
      e.preventDefault();
      const idx = Math.round((wrapper.scrollLeft || 0) / (sectionWidth || 1));
      let targetIndex = idx;
      if (e.key === 'ArrowRight' || e.key === 'PageDown') targetIndex = Math.min(sections.length - 1, idx + 1);
      if (e.key === 'ArrowLeft' || e.key === 'PageUp') targetIndex = Math.max(0, idx - 1);
      const proxyTop = proxy.getBoundingClientRect().top + window.scrollY;
      const rawTarget = proxyTop + cumHeights[targetIndex];

      const navH = nav ? nav.offsetHeight : 0;
      const extra = Math.max(0, window.innerHeight - navH);
      const proxyH = parseFloat(proxy.style.height) || (totalHeight + extra);
      const maxTarget = proxyTop + proxyH - window.innerHeight;
      const target = Math.min(rawTarget, Math.max(proxyTop, maxTarget));
      lastIndex = targetIndex;
      window.scrollTo({ top: target, behavior: 'smooth' });

      requestAnimationFrame(syncFromWindowScroll);
      setTimeout(syncFromWindowScroll, 300);
    }
  });

  // debounce resize
  let resizeTimer;
  window.addEventListener('resize', function() {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(recalcLayout, 120);
  });

  // initial calc and also re-run after images/fonts may change layout
  recalcLayout();
  setTimeout(recalcLayout, 600);
});
</script>

